- name: ANSIBLE RUNNING INFOBLOX
  hosts: localhost
  vars:
    F5_DIR: "/root/A/B/C"
    nios_provider:
      host: "{{ INFOBLOX_HOST }}"
      username: "{{ INFOBLOX_USERNAME }}"
      password: "{{ INFOBLOX_PASSWORD }}"
      wapi_version: "{{ WAPI_VERSION }}"
  connection: local
  become: yes
  become_user: root
  become_method: sudo
  tasks:
    #- name: "TEST"
      #debug: msg="{{ ANSIBLE_PATH }}/stack.log"
    #- name: "SEARCH FILE STRING"
      #register: presence
      #shell: "grep -i '10.241' {{ ANSIBLE_PATH }}/nat.log"
    - name: Ansible check directory.
      stat:
        path: /project/devops/jboss
      register: my_folder
    - name: "echo if directory already existed"
      debug:
        msg: "the directory is already existed"
      when: my_folder.stat.exists
    - name: "Ansible Create directory if not exists"
      file:
        path: "{{ F5_DIR }}"
        state: directory
        mode: 0755
        group: root
        owner: root
      when: my_folder.stat.exists == false
#- name: ANSIBLE SEARCH NAT MAPPING LIST
#  hosts: localhost 
#  tasks:
#    - name: "SEARCH FILE STRING"
#      register: presence
#      shell: "grep -i '10.241' {{ ANSIBLE_PATH }}/nat.log"


